
server {
        # SSL configuration
        # listen 9000 default_server;
        listen 443 ssl default_server;
		listen [::]:443 ssl;
		ssl_protocols TLSv1.2;
        
        server_name mchliyah.42.fr www.mchliyah.42.fr;

		ssl on;
		ssl_certificate        /etc/ssl/certs/nginx-selfsigned.crt;
        ssl_certificate_key    /etc/ssl/private/nginx-selfsigned.key;
        
        # include snippets/snakeoil.conf;
        root /var/www/html;
		index index.php index.html;


	location ~ [^/]\\.php(/|$) {
    	try_files $uri =404;
    	fastcgi_pass wordpress:9000;
    	include fastcgi_params;
    	fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    	}

        # location / {
        #     # First attempt to serve request as file, then
        #     # as directory, then fall back to displaying a 404.
        #     try_files $uri $uri/ =404;
	    #     # proxy_pass http://localhost:8080;
        # 	# proxy_http_version 1.1;
	    #     # proxy_set_header Upgrade $http_upgrade;
        # 	# proxy_set_header Connection 'upgrade';
	    #     # proxy_set_header Host $host;
        # 	# proxy_cache_bypass $http_upgrade;
        # }

        # # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000
        # #
        # location ~ \.php$ {
        #       include snippets/fastcgi-php.conf;
        # #
        # #       # With php7.0-cgi alone:
        #     #   fastcgi_pass mchliyah.42.fr:433;
        # #       # With php7.0-fpm:
        #       fastcgi_pass wordpress:9000;
        # }

        # deny access to .htaccess files, if Apache's document root
        # concurs with nginx's one
        #
		location /adminer/ {
		       proxy_pass http://adminer:8000;
		}
}


# Virtual Host configuration for example.com
#
# You can move that to a different file under sites-available/ and symlink that
# to sites-enabled/ to enable it.
#
# server {
#       listen 443;
#       listen [::]:443;

#       server_name mchliyah.42.fr;

#       root /var/www/html;
#       index index.html index.htm index.nginx-debian.html;

#       location / {
#               try_files $uri $uri/ =404;
#       }
# }
